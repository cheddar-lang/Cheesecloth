language: node_js
node_js:
 - 4.4.0
cache:
  directories:
    - node_modules
sudo: required

install:
 - npm install codecov
 - npm install codeclimate-test-reporter
before_script:
 - grunt install --alias
after_script:
 - istanbul cover test/cli.test.js
 - codeclimate-test-reporter < coverage/lcov.info
 - cat ./coverage/coverage.json | codecov
addons:
    code_climate:
        repo_token: ENV['CODE_CLIMATE_TOKEN']
